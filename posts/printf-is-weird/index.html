<!doctype html><html xmlns=http://www.w3.org/1999/xhtml xml:lang=en-us lang=en-us><head><link href=https://gmpg.org/xfn/11 rel=profile><meta charset=utf-8><meta name=generator content="Hugo 0.129.0"><meta name=viewport content="width=device-width,initial-scale=1"><link rel=canonical href=https://sarah.engineer/posts/printf-is-weird/><title>printf is weird &#183; Sarah Schulte</title>
<meta name=description property="og:description" content="&mldr;but in a surprisingly useful way"><script type=text/javascript>window.addEventListener("pageshow",e=>{e.persisted&&(document.querySelector(".sidebar").classList.remove("animated-sidebar-reverse"),document.querySelector(".sidebar").classList.remove("animated-sidebar"))});const animateIn=()=>{if(window.location.hash==="#animate"){const e=new URL(window.location);e.hash="",history.replaceState(null,"",e.href),document.querySelector(".sidebar").classList.add("animated-sidebar"),setTimeout(()=>document.querySelector(".sidebar").classList.remove("animated-sidebar"),3e3)}};document.readyState==="loading"?document.addEventListener("readystatechange",animateIn):animateIn(),window.animationSequence=e=>{setTimeout(()=>{window.location.href=e},1010),document.querySelector(".sidebar").classList.remove("animated-sidebar"),setTimeout(()=>{document.querySelector(".sidebar").classList.add("animated-sidebar-reverse")},1)}</script><link type=text/css rel=stylesheet href=../../css/print.css media=print><link type=text/css rel=stylesheet href=../../css/poole.css><link type=text/css rel=stylesheet href=../../css/syntax.css><link type=text/css rel=stylesheet href=../../css/hyde.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Abril+Fatface|PT+Sans:400,400i,700"><link rel=apple-touch-icon-precomposed sizes=144x144 href=../../apple-touch-icon-144-precomposed.png><link rel="shortcut icon" href=../../favicon.ico><link href=../../posts/printf-is-weird/index.md rel=alternate type=text/markdown title="Sarah Schulte"></head><body style=background-color:#434345 class=theme-base-0d><aside class=sidebar><div class="container sidebar-sticky"><div class=sidebar-about><a onclick='animationSequence("/")'><h1><span class="color-name underline">sarah</span><span class="color-dot underline">.</span><span class=invisible-text>&shy;</span><span class=underline>engineer</span></h1></a><p class=lead>full-stack software engineer â€¢ game designer</p></div><nav><ul class=sidebar-nav><li><a href=../../posts/>Posts</a></li><li><a href=../../links/>Links</a></li><li><a href=../../about/>About</a></li><li><a href=../../contact/>Contact</a></li></ul></nav><p class=copyright>&copy; 2024. All rights reserved.</p></div></aside><div class=main-container><main class="content container"><div class=post><h1>printf is weird</h1><time datetime=2024-08-02T13:59:27-0700 class=post-date>Fri, Aug 2, 2024</time><p>Today I learned that the <code>printf</code> in bash is <em>weird</em>. In particular, it has one very strange feature that separates it from its C ancestor.</p><p>From the <a href=https://www.gnu.org/software/bash/manual/bash.html#index-printf>reference manual</a>:</p><blockquote><p>The format is <strong>reused as necessary</strong> to consume all of the arguments. If the format requires more arguments than are supplied, the extra format specifications behave as if a zero value or null string, as appropriate, had been supplied. The return value is zero on success, non-zero on failure.</p></blockquote><p>Let&rsquo;s look at some examples.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>printf <span style=color:#e6db74>&#34;,%s&#34;</span> a b c d
</span></span></code></pre></div><p>What would you expect this to print?</p><p>Fans of the C programming language might assume a <code>-Wformat-extra-args</code> warning, and the string <code>",a"</code> to be printed. However, if we try this in our shell, we get this peculiar result:</p><pre tabindex=0><code>,a,b,c,d
</code></pre><p>Even more interestingly, if we try this with multiple format specifiers:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>printf <span style=color:#e6db74>&#34;^%s%s</span>$<span style=color:#e6db74> &#34;</span> a b c d e
</span></span></code></pre></div><p>We get the result:</p><pre tabindex=0><code>^ab$ ^cd$ ^e$
</code></pre><p><em>weird.</em></p></div></main></div></body></html>